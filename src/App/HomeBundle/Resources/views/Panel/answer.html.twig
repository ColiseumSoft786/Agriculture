{% extends "::single.html.twig" %}

{% block title %}Discussion Panel{% endblock %}

{% block body %}
    <div class="module-extra-small">
        <div class="container">
            <div class="row">
                <div class="col-md-offset-1 col-md-10">

                    <div class="col-xs-12">
                        <table class="table table-bordered">
                            <tr>
                                <th rowspan="4">Q- {{ q.question }}</th>
                            </tr>
                            <tr>
                                <th style="white-space: nowrap;width: 1%">{{ q.name }}</th>
                            </tr>
                            <tr>
                                <th style="white-space: nowrap;width: 1%">{{ q.date|date("d/m/Y H:s:i") }}</th>
                            </tr>
                            <tr>
                                <th style="white-space: nowrap;width: 1%"><button onclick="$('#answerdiv').toggle();" class="btn btn-d btn-border-d btn-block">Add Answer</button></th>
                            </tr>
                        </table>
                    </div>
                    <div class="col-sm-offset-1 col-xs-11" id="answerdiv" style="display: none">
                        <table class="table table-bordered">
                            <tr>
                                <td>
                                    <form id="ansform" method="post" action="">
                                        <label for="">Name</label>
                                        <input type="text" id="name" name="name" class="form-control" placeholder="Enter your name">
                                        <label for="">Answer</label>
                                        <textarea name="answer" id="answer" rows="3" placeholder="Enter Answer" class="form-control"></textarea>
                                        <input type="submit" value="Confirm" class="btn btn-d btn-circle pull-right" style="margin-top: 10px;">
                                    </form>

                                </td>
                            </tr>
                        </table>
                        <hr>
                    </div>
                    {% if ans|length != 0 %}
                        {% for item in ans %}
                            <div class="col-sm-offset-1 col-xs-4">
                                <table style="margin-bottom: 2px" class="table table-bordered">
                                    <tr>
                                        <th style="width: 1%;white-space: nowrap"><span class="fa fa-angellist"></span></th>
                                        <td>{{ item.name }}</td>
                                    </tr>
                                </table>
                            </div>
                            <div class="col-sm-offset-4 col-sm-3">
                                <table style="margin-bottom: 2px" class="table table-bordered">
                                    <tr>
                                        <th style="width: 1%;white-space: nowrap">{{ item.date|date("d/m/Y H:s:i") }}</th>
                                    </tr>
                                </table>

                            </div>
                            <div class="col-sm-offset-1 col-xs-11">
                                <table class="table table-bordered">
                                    <tr>
                                        <td>{{ item.answer }}</td>
                                    </tr>
                                </table>
                                <hr>
                            </div>
                        {% endfor %}
                        {% else %}
                            <div class="col-sm-offset-1 col-xs-11">
                                <table class="table table-bordered">
                                    <tr>
                                        <td style="text-align: center">No Answer</td>
                                    </tr>
                                </table>
                                <hr>
                            </div>

                    {% endif %}



                </div>
            </div>
        </div>
    </div>
    <br><br><br><br><br><br>
{% endblock %}
{% block script %}
    <script>
        $('#ansform').submit(function(e){
            if($('#name').val() == ""){
                alert('Name is empty');
                e.preventDefault();
            }else if($('#answer').val() == ""){
                e.preventDefault();
                alert('Answer is empty');
            }
        })
    </script>
{% endblock %}
